{% import "bootstrap/wtf.html" as wtf %}


{% macro render_simple_errors(form) -%}
  {% if form.errors %}
    <ul class="errors">
      {% for field_name, field_errors in form.errors|dictsort if field_errors %}
        {% for error in field_errors %}
          <li>{{ form[field_name].label }}: {{ error }}</li>
        {% endfor %}
      {% endfor %}
    </ul>
  {% endif %}
{%- endmacro %}

{% macro render_radio_inline_field(field) -%}
  <div class="form-group">
    {{ field.label }}
    <div class="form-group">
      {% for subfield in field%}
        <label class="radio-inline control-label">
          {{ subfield(class='radio-inline') }}{{ subfield.label.text }}
        </label>
      {% endfor %}
    </div>
  </div>
{%- endmacro %}

{% macro render_patient(form) -%}
  <fieldset>
    <legend>{{ form.label.text }}</legend>
    {{ form.hidden_tag() }}
    {% for subfield in form %}
      {% if subfield.type != "CSRFTokenField" %}
        {% if subfield.type == "RadioField" %}
          {{ render_radio_inline_field(subfield) }}
        {% elif subfield.type == "DateField" %}
          {{ wtf.form_field(subfield, placeholder="dd/MM/yyyy") }}
        {% else %}
          {{ wtf.form_field(subfield) }}
        {% endif %}
      {% endif %}
    {% endfor %}
  </fieldset>
{%- endmacro %}

{% macro render_dated_event(form) -%}
  <fieldset>
    <legend>{{ form.label.text }}</legend>
    {{ render_radio_inline_field(form.occurred) }}
    {{ wtf.form_field(form.date, placeholder="dd/MM/yyyy") }}
  </fieldset>
{%- endmacro %}

{% macro render_symptoms(form) -%}
  <fieldset>
    <legend>{{ form.label.text }}</legend>
    {% for subform in form.entries %}
      {{ subform.hidden_tag() }}
      <div class="form-inline">
        <div class="form-group">
          {{ subform.observed.label }}:&nbsp;&nbsp;
          {{ wtf.form_field(subform.observed) }}&nbsp;&nbsp;
        </div>
        <div class="form-group">
          {{ subform.details(class="form-control", placeholder="Informações adicionais", size=30) }}
        </div>
      </div>
      <hr />
    {% endfor %}
  </fieldset>
{%- endmacro %}

{% macro render_secondary_symptoms(form) -%}
  <fieldset>
    <legend>{{ form.label.text }}</legend>
    {% for subform in form.entries %}
      {{ subform.hidden_tag() }}
      <div class="form-inline">
        <div class="form-group">
          <label class="checkbox-inline">
            {{ subform.observed }}
            {{ subform.observed.label.text }}&nbsp;&nbsp;
          </label>
        </div>
        <div class="form-group">
          {{ subform.details(class="form-control", placeholder="Informações adicionais", size=30) }}
        </div>
      </div>
      <hr />
    {% endfor %}
  </fieldset>
{%- endmacro %}

{% macro render_samples(form) -%}
  <fieldset>
    <legend>{{ form.label.text }}</legend>
    {% for sample_form in form.entries %}
      {% for field in sample_form %}
        {% if field.type == "DateField" %}
          {{ wtf.form_field(field, placeholder="dd/MM/yyyy") }}
        {% else %}
          {{ wtf.form_field(field) }}
        {% endif %}
      {% endfor %}
    {% endfor %}
  </fieldset>
{%- endmacro %}

{% macro render_admission(form) -%}
  <fieldset>
    <legend>Admissão</legend>
    {{ wtf.form_field(form.id_lvrs_intern) }}
    {{ wtf.form_field(form.state_id) }}
    {{ wtf.form_field(form.city_id) }}
    {{ wtf.form_field(form.health_unit) }}
    {{ wtf.form_field(form.requesting_institution) }}
    {{ wtf.form_field(form.details) }}
  </fieldset>
{%- endmacro %}