<div class="page-header">
    <h1>
      Estoque de Reativos
    </h1>
</div>
<table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th width="40%">Reativo</th>
        <th width="10%">Quantidade em Estoque</th>
        <th width="10%">Alerta de estoque em</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
        <tr>
          <td>
            <a data-toggle="collapse" href="#collapseStockProducts-{{loop.index}}" aria-expanded="false" aria-controls="collapseStockProducts">
              {{ product.name }}
            </a>
          </td>
          <td {% if product.total < product.stock_minimum %} class="danger" title="Estoque abaixo do mÃ­nimo"{% endif %}>
              {{ product.total }}
          </td>
          <td>{{ product.stock_minimum }}</td>
        </tr>
        {% if product.total > 0 %}
          <tr class="collapse" id="collapseStockProducts-{{loop.index}}"><td colspan="4"><table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Lote</th>
                <th>Data de validade</th>
                <th>Quantidade em estoque</th>
              </tr>
            </thead>
            <tbody>
              {% for stock_product in product.stock_products %}
                {% if stock_product.amount > 0 %}
                  <tr>
                    <td>{{ stock_product.lot_number }}</td>
                    <td>{{ stock_product.expiration_date }}</td>
                    <td>{{ stock_product.amount }}</td>
                  </tr>
                {% endif %}
              {% endfor %}
            </tbody>
          </table></td></tr>
        {% endif %}
        </div>
      {% endfor %}
    </tbody>
  </table>
